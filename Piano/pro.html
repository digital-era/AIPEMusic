<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>跨越时空的对话：肖邦 x 李白</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap">
    <style>
        :root {
            --bg-space-dark: #0a0e17;
            --bg-space-deep: #131829;
            --bg-space-mid: #1d2438;
            --bg-space-light: #2a3450;
            --text-dim: rgba(255, 255, 255, 0.35);
            --text-active: #ffffff;
            --gold-base: #d4af37;
            --gold-shine: #ffd700;
            --gold-pale: #f0e6d2;
            --chinese-ink: #1a365d;
            --western-marble: #3a506b;
            --font-cn: "Noto Serif SC", "Songti SC", "STSong", "SimSun", serif;
            --font-en: "Playfair Display", "Times New Roman", serif;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg,
                var(--bg-space-dark) 0%,
                var(--bg-space-deep) 30%,
                var(--bg-space-mid) 70%,
                var(--bg-space-light) 100%);
            overflow-x: hidden;
            line-height: 1.8;
            min-height: 100vh;
            width: 100vw;
            font-family: var(--font-cn);
            color: var(--text-active);
            position: relative;
            -webkit-text-size-adjust: 100%;
        }
        /* 以下为原有的背景、封面、纹理等样式，保持不变 */
        .space-gradient { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 20% 30%, rgba(42, 52, 80, 0.4) 0%, transparent 40%), radial-gradient(circle at 80% 70%, rgba(29, 36, 56, 0.3) 0%, transparent 40%), radial-gradient(circle at 40% 80%, rgba(26, 54, 93, 0.2) 0%, transparent 40%), radial-gradient(circle at 60% 20%, rgba(58, 80, 107, 0.2) 0%, transparent 40%); z-index: -2; pointer-events: none; }
        .star-halo { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 15% 25%, rgba(212, 175, 55, 0.05) 0%, transparent 30%), radial-gradient(circle at 85% 75%, rgba(255, 215, 0, 0.03) 0%, transparent 30%), radial-gradient(circle at 50% 50%, rgba(240, 230, 210, 0.02) 0%, transparent 40%); z-index: -1; pointer-events: none; filter: blur(20px); }
        .initial-cover { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #0a0e17 0%, #131829 30%, #1d2438 70%, #2a3450 100%); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 1.5s ease-out, transform 1.5s ease-out; pointer-events: none; }
        .cover-content { position: relative; text-align: center; transform: scale(0.8); opacity: 0; animation: coverReveal 2.5s cubic-bezier(0.16, 1, 0.3, 1) 0.5s forwards; }
        /* …… 此处省略大量原有封面、标题、动画等样式，未做任何改动 …… */
        /* 只展示关键修改部分，实际使用请保留您原始代码中的完整样式 */

        /* ================= 核心修改 - 移动端诗歌排版 ================= */
        @media (max-width: 600px) {
            .poem-line {
                font-size: 1.1rem;
                margin: 16px 0;
                line-height: 1.5;
                white-space: pre-wrap;
                word-break: keep-all;
                overflow-wrap: break-word;
                letter-spacing: 0.3px;
                padding: 0 8px;
                text-align: center !important;          /* 全部强制居中 */
            }

            /* 前两行尽量不换行 */
            .poem-line:nth-child(1),
            .poem-line:nth-child(2) {
                white-space: nowrap !important;
                font-size: 1.08rem;                    /* 稍小一点防溢出 */
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            /* 删除原有的前两行左对齐规则 */
            /* .poem-line:nth-child(1), .poem-line:nth-child(2) { text-align: left; }  ← 已移除 */
        }

        /* 保留原有 .poem-line.active 样式，但播放时仍有效 */
        .poem-line.active {
            color: var(--gold-shine);
            transform: scale(1.05);
            font-weight: 400;
        }
    </style>
</head>
<body>
    <!-- 保留您原有的所有背景层、封面、容器结构等 -->

    <!-- 诗歌部分保持原HTML结构 -->
    <div class="poem-container" id="poem-box">
        <div class="poem-line">君不见，黄河之水天上来，奔流到海不复回。</div>
        <div class="poem-line">君不见，高堂明镜悲白发，朝如青丝暮成雪。</div>
        <!-- 其余诗句不变 -->
    </div>

    <!-- JavaScript 部分 - 关键修改：移除非播放状态下的滚动高亮 -->
    <script>
        // …… 保留您原有的所有变量定义、switchTrack、togglePlay、时间同步等逻辑 ……

        // 彻底禁用滚动时的高亮（只在播放时通过时间同步变色）
        function initScrollHandler() {
            // 留空或仅保留其他非高亮相关的滚动逻辑
            // 不再监听 IntersectionObserver 或 scroll 事件来进行 .active 切换
            console.log("[优化] 已禁用非播放状态下的诗句自动高亮");
        }

        // 其余原有代码保持不变
        // 如 audio 事件监听、模态框、键盘快捷键、触摸切换等全部保留

        document.addEventListener('DOMContentLoaded', function() {
            // 您的原有初始化代码...
            initScrollHandler();  // 调用修改后的空实现
        });
    </script>
</body>
</html>
